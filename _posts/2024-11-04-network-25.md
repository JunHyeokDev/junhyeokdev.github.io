---
title: (혼자 공부하는 네트워크) 26강 라우팅 테이블
date: 2024-11-04 00:00:00 +0900
author: JunHyeokDev
categories: [Jungle Keyword, Network]
tags: [Study]
---

# 라우팅 테이블

## LAN을 넘어 통신하기

- 물리 계층과 데이터링크 계층 만으로는 LAN을 넘어서 통신하기 어렵습니다!
    1. 다른 네트워크까지의 도달 경로를 파악하기 어려움
    2. 모든 네트워크에 속한 모든 호스트의 위치를 특정하기 어려움

### 라우팅 과정 (홉의 수) 확인

- Linux, Mac OS : traceroute www.google.com

![Desktop View](/assets/Network/traceroute.png){: width="700" height="400" }

### 라우팅 테이블이란?

라우터는 `라우팅 테이블`을 기반으로 패킷을 내보냅니다. 이 때, `라우팅 테이블`은 수동으로 만들거나, `라우팅 프로토콜`을 통해 자동으로 만들 수 있습니다.

`라우팅 프로토콜` 또한 `라우팅 테이블`이 어떤 정보로 구성되느냐에 따라 **여러 유형**으로 구분됩니다.

#### 라우팅 테이블에 포함된 정보

1. 수신지 IP 주소와 서브넷 마스크
    - 최종적으로 패킷을 전달할 대상이 **수신지 IP 주소** 입니다.
2. 다음 홉 (Next hop)
    - 최종 수신지까지 가기 위해 다음으로 거쳐야 할 호스트의 IP 주소나 인터페이스
    - `Gateway (게이트웨이)` 라고 명시되기도 함
3. 네트워크 인터페이스
    - 패킷을 내보낼 통로
    - 인터페이스(NIC) 이름이 직접 명시되거나 인터페이스에 대응하는 IP 주소 명시
4. 메트릭 (Metric)
    - 해당 경로로 이동하는데 드는 비용
    - 라우팅 테이블의 여러 경로 중 메트릭이 낮은 경로를 선호

#### 예시

![Desktop View](/assets/Network/routing_table_info.png){: width="700" height="400" }

- 수신지가 192.168.2.0/24 인 패킷은
- eth0 (인터페이스)를 통해
- 192.168.2.1 (게이트웨이)로 전송하라
- 이 때 소요값은 30 메트릭 이다

#### 디폴트 라우트 : 라우팅 테이블에 경로가 없을 때

- 앞선 글에서 `default route`는 기본적으로 패킷을 내보낼 경로라고 하였으며 **모든 IP 주소**를 의미하는 0.0.0.0/0 으로 명시
    - 기본 게이트웨이 = 네트워크 외부로 나가기 위한 첫 경로
    - 일반적으로 라우터/공유기 주소를 의미함!
    - 라우팅 테이블에 따로 경로가 등록되어 있지 않은 패킷들을 기본적으로 기본 게이트웨이(라우터)에게 전달

![Desktop View](/assets/Network/default_route.png){: width="700" height="400" }

- 수신지 IP 주소가 1.2.3.4인 패킷을 받았다면, `Default route`, eth2 인터페이스를 통해 192.168.0.1로 전송
    - 해당 사진에서는 수신지 IP가 1.2.3.4 인 곳이 없다. 그렇기 때문에 기본 배송지인 0.0.0.0 으로 보낸다는 뜻이다!

#### Mac 에서 라우팅 테이블 확인하기

```
netstat -rn
```

![Desktop View](/assets/Network/routing_table_cmd.png){: width="700" height="400" }